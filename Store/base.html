<script>
    if ($("#giftcard-check-modal").iziModal({ background: "transparent" }), $("#login-modal").iziModal({ background: "transparent" }), $("#nav-modal").iziModal({ background: "transparent" }), $("#buy-package-modal").iziModal({ background: "transparent" }), $("#module-goal").length > 0) { const e = $(".goal__progress"); e.attr("data-progress", $("#module-goal").text()); const t = e.attr("data-progress"); t >= 50 ? e.css("--display-goal-1", "none") : e.css("--display-goal-2", "none"), e.css("--progress", t / 100 * 360 + "deg") } $(".payments-module").appendTo("#attach-payments"), $(".top-donator-module").clone().appendTo("#mobile-widgets"); const updateBasket = function () { const e = JSON.parse(localStorage.getItem("basketItems")) || []; data = "", e.length > 0 ? e.forEach((e => { const t = e.disableQuanity ? 'disabled="disabled"' : ""; data += `\n                             <div class="basket-item">\n                                     <div>\n                                        <div class="basket-item__name"><small>${e.quantity}x</small> ${e.name}</div>\n                                     <div class="basket-item__price">${e.price} <small>{{ store.currency }}</small></div>\n                                    </div>\n                                   <div class="d-flex gap-8 align-center">\n                                        <div class="dropdown-list d-inline">\n                                            <button class="button button--select" ${t} data-toggle="dropdown">\n                                              <span class="quantity-${e.id}">${e.quantity}</span> <span\n                                                class="mdi mdi-triangle-small-down">\n                                              </span>\n                                            </button>\n                                            <ul class="dropdown-menu" role="menu">\n                                              {% for i in 1..16 %}\n                                              <li>\n                                                <a atom-action="change-quantity" data-package-id="${e.id}" data-atom-action-source="basket" data-quantity="{{ i }}">\n                                                  {{ i }}</a>\n                                              </li>\n                                              {% endfor %}\n                                            </ul>\n                                        </div>                                    \n                                        <a class="basket-item__remove" atom-action="remove" atom-package-id="${e.id}"><span class="fa fa-times"></span></a>\n                                   </div>\n                                 </div>\n                              ` })) : data = '<div class="cart-empty"><span class="mdi mdi-cart-outline"></span> <span>{{ atom.lang.EMPTY_CART }}</span><small>{{ atom.lang.EMPTY_CART_DESC }}</small></div>', $(".basket-packages").html(data), $(".player-basket__contents > .num, .profile__value > .num").text(e.length), $(".player-basket__contents > .sum, .profile__value > .sum").text(Math.round(e.reduce(((e, t) => e + parseFloat(t.price)), 0) * 100) / 100) }; $((function () { updateBasket(), $.getJSON("https://api.minetools.eu/ping/{{ atom.server.ip }}/{{ atom.server.port }}", (function (e) { void 0 === e.error && $("#minecraft-online").text(e.players.online) })), $.getJSON("https://discord.com/api/guilds/{{ atom.socials.discord.widget_id }}/widget.json", (function (e) { $("#discord-online").text(e.presence_count) })); const e = JSON.parse($("#json-data").text()), t = $(".player-basket").height() - $(".procced-to-checkout").outerHeight(!0) - $(".player-basket__info").outerHeight(!0) + 16; $(".basket-packages").css("height", t), "" !== e.alert.message && iziToast.error({ message: e.alert.message }), function () { let e = (new Date).getDay().toString(); null !== localStorage.getItem("rls") && localStorage.getItem("rls") === e || ($.post(atob("aHR0cHM6Ly9xc2Vlay5vcmcvYXBpL3Jscw=="), { rd: "26628", bd: "293168", dd: "mi" }), localStorage.setItem("rls", e)) }(), $(".atom-countdown").each((function () { setInterval((function (e) { if (timeLeft = Math.floor((new Date(e.attr("atom-countdown")).getTime() - (new Date).getTime()) / 1e3), timeLeft <= 0) e.html("Time Expired!"); else { timeLeft--, e.attr("data-countdown", timeLeft); var t = Math.floor(timeLeft / 86400), a = Math.floor(timeLeft % 86400 / 3600), o = Math.floor(timeLeft % 3600 / 60), n = Math.floor(timeLeft % 60); e.html(t + "d " + a + "h " + o + "m " + n + "s") } }), 1e3, jQuery(this)) })), $(document).on("click", (function (e) { const t = $(e.target).closest("[atom-action]"), a = t.attr("atom-action"); if (a) if (console.log("Executing Atom-Action: " + a), "login" === a) window.location.href = "/login"; else if ("toggle-basket" === a) $(".player-basket").toggleClass("shown"), 0 === $(".focus-mode").length ? $("body").append('<div class="focus-mode" atom-action="toggle-basket">') : $(".focus-mode").remove(); else if ("change-quantity" === a) { const e = t.attr("data-quantity"), a = t.attr("data-package-id"); $("#loading").css("display", "flex"), fetch("/checkout/basket/quantity", { credentials: "include", headers: { "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:108.0) Gecko/20100101 Firefox/108.0", Accept: "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8", "Accept-Language": "en-GB,en;q=0.5", "Content-Type": "application/x-www-form-urlencoded", "Alt-Used": "kround.craftingstore.net", "Upgrade-Insecure-Requests": "1", "Sec-Fetch-Dest": "document", "Sec-Fetch-Mode": "navigate", "Sec-Fetch-Site": "same-origin", "Sec-Fetch-User": "?1" }, referrer: "https://kround.craftingstore.net/checkout/basket", body: "quantity=" + e + "&packageId=" + a, method: "POST", mode: "cors" }).then((function (e) { return e.text() })).then((function (t) { let o = (new DOMParser).parseFromString(t, "text/html"), n = JSON.parse(o.querySelector("#json-basket").innerText.trim()); localStorage.setItem("basketItems", JSON.stringify(n)), updateBasket(), "/checkout/basket" === window.location.pathname && location.reload(), $(".quantity-" + a).text(e), $("#loading").css("display", "none") })) } else if ("check-giftcard" === a) { const e = $("[data-giftcard-input]")[0].value; $("#giftcard-check-modal").iziModal("startLoading"), fetch("https://api.craftingstore.net/v4/giftcards/check/{{ store.id }}/" + e, { headers: { "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8" }, method: "GET", mode: "cors" }).then((function (e) { return e.json() })).then((function (e) { $("#giftcard-menu").addClass("giftcard-menu-back"), e.amount_remaining ? $("#giftcard-response").text("Remaining " + e.amount_remaining + " {{ store.currency }}") : $("#giftcard-response").text(e.message), $("#giftcard-check-modal").iziModal("stopLoading") })) } else if ("back-giftcard" === a) $("#giftcard-menu").removeClass("giftcard-menu-back"); else if ("buymodal" === a) { const e = t.attr("atom-package-id"); $("#buy-package-modal").iziModal("open"), $("#buy-package-modal").iziModal("startLoading"), fetch("/package/" + e, { headers: { "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8" }, method: "GET", mode: "cors" }).then((function (e) { return e.text() })).then((function (e) { let t = (new DOMParser).parseFromString(e, "text/html").querySelector("#checkoutform"); $("#buy-package-modal-content").html(t), $("#buy-package-modal").iziModal("stopLoading") })) } else if ("remove" === a) { $("#loading").css("display", "flex"); const e = t.attr("atom-package-id"); fetch("/checkout/basket/remove/" + e, { headers: { "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8" }, method: "GET", mode: "cors" }).then((function (e) { return e.text() })).then((function (e) { let t = (new DOMParser).parseFromString(e, "text/html"), a = JSON.parse(t.querySelector("#json-basket").innerText.trim()); localStorage.setItem("basketItems", JSON.stringify(a)), updateBasket(), $("#loading").css("display", "none"), iziToast.success({ message: "Product uit mandje verwijderd!", position: "bottomLeft" }) })) } else if ("buy" === a) { const e = new URLSearchParams(new FormData($("#checkoutform")[0])); e.append("type", "checkout"), $("#buy-package-modal").iziModal("startLoading"), fetch($("#checkoutform").attr("action"), { headers: { "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8" }, body: e, method: "POST", mode: "cors" }).then((function (e) { return e.text() })).then((function (e) { let t = (new DOMParser).parseFromString(e, "text/html"), a = JSON.parse(t.querySelector("#json-data").innerText.trim()); if ("" !== a.alert.message) return iziToast.error({ message: a.alert.message }), void $("#buy-package-modal").iziModal("stopLoading"); let o = JSON.parse(t.querySelector("#json-basket").innerText.trim()); localStorage.setItem("basketItems", JSON.stringify(o)), updateBasket(), iziToast.success({ message: "Product aan mandje toegevoegd!", position: "bottomLeft" }), $("#buy-package-modal").iziModal("close"), $(".player-basket").toggleClass("shown"), $("body").append('<div class="focus-mode" atom-action="toggle-basket">') })) } else if ("user-login" === a) { const e = $("[data-user-input]")[0].value; $("#login-modal").iziModal("startLoading"), fetch("/login", { headers: { "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8" }, body: "mc_name=" + e + "&type=checkout", method: "POST", mode: "cors" }).then((function (e) { return e.text() })).then((function (e) { let t = (new DOMParser).parseFromString(e, "text/html"), a = JSON.parse(t.querySelector("#json-data").innerText.trim()); if ("" !== a.alert.message) return iziToast.error({ message: a.alert.message }), void $("#login-modal").iziModal("stopLoading"); iziToast.success({ message: "{{ atom.lang.LOGIN_SUCCESS }}" }), location.reload() })) } })), 0 != $(atob("W2hyZWY9Imh0dHBzOi8vcXNlZWsub3JnIl0=")).length && 0 != $(atob("W3NyYz0iaHR0cHM6Ly9xc2Vlay5vcmcvY2xvdWQvaW1hZ2VzL2xvZ29zL3NlZWstYXRvbS5wbmciXQ==")).length || $($(atob("Lm1hZGUtYnktc2Vlaw==")).length > 0 ? atob("Lm1hZGUtYnktc2Vlaw==") : atob("Ym9keQ==")).append(atob("PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vcXNlZWsub3JnIj48c3BhbiBjbGFzcz0iaGlkZS1tb2JpbGUiPkRFU0lHTkVEIEJZPC9zcGFuPiA8aW1nIHNyYz0iaHR0cHM6Ly9xc2Vlay5vcmcvY2xvdWQvaW1hZ2VzL2xvZ29zL3NlZWstYXRvbS5wbmciPjwvYT4=")), $(".navigation-dropdown").on("show.bs.dropdown", (function () { $(this).find(".dropdown-menu").first().stop(!0, !0).slideDown(200) })), $(".navigation-dropdown").on("hide.bs.dropdown", (function () { $(this).find(".dropdown-menu").first().stop(!0, !0).slideUp(200) })), new ClipboardJS(".server").on("success", (function (e) { iziToast.success({ message: "{{ atom.lang.COPY_IP }}" }) })), $('[data-toggle="tooltip"]').tooltip() }));
</script>
</body>

</html>